\documentclass[varwidth=true]{standalone}
\usepackage{amsmath}
\usepackage{array}
\usepackage{tikz}
\usetikzlibrary{tikzmark, calc}

\begin{document}

\begin{minipage}{0.9\textwidth}
\centering
% --- Krok 1: R2 <- R2 - R1 ---
\[
\left(
\begin{array}{rrrr|r}
2 & -1 & 0 & 4 & \tikzmarknode{row1}{2} \\
2 & -1 & 1 & 2 & \tikzmarknode{row2}{2} \\
0 & 0 & 2 & -4 & 0 \\
6 & -3 & -3 & 18 & 6
\end{array}
\right)
\begin{tikzpicture}[remember picture, overlay]
    \draw[->, thick, shorten >=2pt]
        ([xshift=1.5em]row1.east)
        -- ++(1em,0) coordinate (corner)
        -- (corner |- row2.east)
        node [midway, right] {$-1$}
        -- ([xshift=1.5em]row2.east);
\end{tikzpicture}
\hspace{3.5em} \sim \quad
\left(
\begin{array}{rrrr|r}
2 & -1 & 0 & 4 & 2 \\
0 & 0 & 1 & -2 & 0 \\
0 & 0 & 2 & -4 & 0 \\
6 & -3 & -3 & 18 & 6
\end{array}
\right)
\]
% Medzera
\\[2\baselineskip]
% --- Krok 2: R4 <- R4 - 3*R1 ---
\[
\left(
\begin{array}{rrrr|r}
2 & -1 & 0 & 4 & \tikzmarknode{row1}{2} \\
0 & 0 & 1 & -2 & 0 \\
0 & 0 & 2 & -4 & 0 \\
6 & -3 & -3 & 18 & \tikzmarknode{row4}{6}
\end{array}
\right)
\begin{tikzpicture}[remember picture, overlay]
    \draw[->, thick, shorten >=2pt]
        ([xshift=1.5em]row1.east)
        -- ++(1em,0) coordinate (corner)
        -- (corner |- row4.east)
        node [midway, right] {$-3$}
        -- ([xshift=1.5em]row4.east);
\end{tikzpicture}
\hspace{3.5em} \sim \quad
\left(
\begin{array}{rrrr|r}
2 & -1 & 0 & 4 & 2 \\
0 & 0 & 1 & -2 & 0 \\
0 & 0 & 2 & -4 & 0 \\
0 & 0 & -3 & 6 & 0
\end{array}
\right)
\]
% Medzera
\\[2\baselineskip]
% --- Krok 3: R3 <- R3 - 2*R2 ---
\[
\left(
\begin{array}{rrrr|r}
2 & -1 & 0 & 4 & 2 \\
0 & 0 & 1 & -2 & \tikzmarknode{row2}{0} \\
0 & 0 & 2 & -4 & \tikzmarknode{row3}{0} \\
0 & 0 & -3 & 6 & 0
\end{array}
\right)
\begin{tikzpicture}[remember picture, overlay]
    \draw[->, thick, shorten >=2pt]
        ([xshift=1.5em]row2.east)
        -- ++(1em,0) coordinate (corner)
        -- (corner |- row3.east)
        node [midway, right] {$-2$}
        -- ([xshift=1.5em]row3.east);
\end{tikzpicture}
\hspace{3.5em} \sim \quad
\left(
\begin{array}{rrrr|r}
2 & -1 & 0 & 4 & 2 \\
0 & 0 & 1 & -2 & 0 \\
0 & 0 & 0 & 0 & 0 \\
0 & 0 & -3 & 6 & 0
\end{array}
\right)
\]
% Medzera
\\[2\baselineskip]
% --- Krok 4: R4 <- R4 + 3*R2 ---
\[
\left(
\begin{array}{rrrr|r}
2 & -1 & 0 & 4 & 2 \\
0 & 0 & 1 & -2 & \tikzmarknode{row2}{0} \\
0 & 0 & 0 & 0 & 0 \\
0 & 0 & -3 & 6 & \tikzmarknode{row4}{0}
\end{array}
\right)
\begin{tikzpicture}[remember picture, overlay]
    \draw[->, thick, shorten >=2pt]
        ([xshift=1.5em]row2.east)
        -- ++(1em,0) coordinate (corner)
        -- (corner |- row4.east)
        node [midway, right] {$3$}
        -- ([xshift=1.5em]row4.east);
\end{tikzpicture}
\hspace{3.5em} \sim \quad
\left(
\begin{array}{rrrr|r}
2 & -1 & 0 & 4 & 2 \\
0 & 0 & 1 & -2 & 0 \\
0 & 0 & 0 & 0 & 0 \\
0 & 0 & 0 & 0 & 0
\end{array}
\right)
\]
\end{minipage}

\begin{align*}
    % Solve for x_3 from the second equation
    x_3 - 2x_4 &= 0 \\
    x_3 &= 2x_4 \\
    % Set parameter x_4 = s
    x_4 &= s \\
    x_3 &= 2s \\
    
    % Solve for x_1 from the first equation
    2x_1 - x_2 + 4x_4 &= 2 \\
    2x_1 &= 2 + x_2 - 4x_4 \\
    % Set parameters x_2 = t (as it's needed) and use x_4 = s
    x_2 &= t \\
    2x_1 &= 2 + t - 4s \\
    x_1 &= 1 + \frac{1}{2}t - 2s
\end{align*}

